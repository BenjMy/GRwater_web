{# Macros to make the life easier across the website #}


{%- macro figure(src, caption, style="") %}
  <figure>
    <img src="{{ src }}" alt="{{ caption|striptags }}" style="{{ style }}">
    <figcaption>{{ caption }}</figcaption>
  </figure>
{%- endmacro %}


{%- macro video(src, caption, style="", type="video/mp4") %}
  <figure>
    <video style="{{ style }}" muted autoplay controls="false" loop alt="{{ caption }}">
      <source src="{{ src }}" type="{{ type }}"/>
    </video>
    <figcaption>{{ caption }}</figcaption>
  </figure>
{%- endmacro %}


{%- macro page_title_link(page, anchor) %}
  <a href="{{ page.path|relative_to(anchor.path) }}">{{ page.title }}</a>
{%- endmacro %}


{%- macro make_people_list(people, prefix="") %}
{# Create a list of people with photos (from GitHub) and other info #}
{%- for person in people %}
<div class="row gx-5 gy-5 my-5 align-items-center justify-content-center">
  <div class="col-12 col-sm-7 col-md-8 text-center text-sm-start">
    <h3 id="{{ prefix }}{{ person.github }}">{{ person.name }}</h3>
    <ul class="team-info">
      <li><strong>{{ person.role }}</strong> • {{ person.affiliation }}</li>
      {%- if person.pronouns is defined %}
        <li>Pronouns: {{ person.pronouns }}</li>
      {%- endif %}
      {%- if person.email is defined %}
        <li>
          Email: <a href="mailto:{{ person.email }}" target="_blank">{{ person.email }}</a>
        </li>
      {%- endif %}
      {%- if person.orcid is defined %}
        <li>
          ORCID: <a href="https://orcid.org/{{ person.orcid }}" target="_blank">{{ person.orcid }}</a>
        </li>
      {%- endif %}
      {%- if person.website is defined %}
        <li>
          Website: <a href="{{ person.website }}" target="_blank">{{ person.website|replace("https://", "")|replace("http://", "") }}</a>
        </li>
      {%- endif %}
      {%- if person.project is defined %}
        <li>Project: {{ person.project }}</li>
      {%- endif %}
      <li class="team-icons">
        Links:
        {{- icon_link(person, "github", icon="fab fa-github", label="GitHub", prefix="https://github.com/") -}}
        {{- icon_link(person, "orcid", icon="ai ai-impactstory", label="ImpactStory", prefix="https://impactstory.org/u/") -}}
        {{- icon_link(person, "google_scholar", icon="ai ai-google-scholar", label="Google Scholar") -}}
        {{- icon_link(person, "researchgate", icon="ai ai-researchgate", label="ResearchGate") -}}
        {{- icon_link(person, "lattes", icon="ai ai-lattes", label="Currículo Lattes", prefix="https://lattes.cnpq.br/") -}}
        {{- icon_link(person, "cv", icon="ai ai-cv", label="Curriculum Vitæ") -}}
      </li>
    </ul>
  </div>
  <div class="col-9 col-sm-5 col-md-4 order-first">
    {%- if person.picture is defined %}
      <img class="headshot" src="{{ person.picture }}" alt="{{ person.name }}'s profile picture">
    {%- elif person.github is defined %}
      <img class="headshot" src="https://github.com/{{ person.github }}.png" alt="{{ person.name }}'s profile picture">
    {%- else %}
      <img class="headshot" src="../images/avatar-placeholder.jpg" alt="Placeholder image instead of {{ person.name }}'s profile picture">
    {%- endif %}
  </div>
</div>
{%- endfor %}
{%- endmacro %}


{%- macro icon_link(person, field, icon, label, prefix="") -%}
  {%- if field in person -%}
    <a href="{{ prefix }}{{ person[field] }}" aria-label="{{ label }}" title="{{ label }}" target="_blank"><i class="{{ icon }}" aria-hidden="true"></i></a>
  {%- endif -%}
{%- endmacro -%}
